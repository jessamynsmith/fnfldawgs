{% extends 'fnfl/base.html' %}

{% block content %}
    <div class="post">
        {% if lineup.published_date %}
            <div class="date">
                {{ lineup.published_date }}
            </div>
        {% else %} 
            <a class="btn btn-default" href="{% url 'lineup_publish' pk=lineup.pk %}">Publish</a>
        {% endif %}
        {% if user.is_authenticated %}
            <a class="btn btn-default" href="{% url 'lineup_edit' pk=lineup.pk %}"><span class="glyphicon glyphicon-pencil"></span></a>
            <a class="btn btn-default" href="{% url 'lineup_remove' pk=lineup.pk %}"><span class="glyphicon glyphicon-remove"></span></a>
            <a class="btn btn-default" href="{% url 'add_player' pk=lineup.pk %}">Add Player</a>
        {% else %}
            <a href="{% url 'login' %}" class="top-menu"><span class="glyphicon glyphicon-lock"></span></a>
        {% endif %}
        <h1>{{ lineup.week }}</h1>
        {% for p in lineup.player.all %}
            {% if p.position == "QB" %}
                <a href="{% url 'add_score' pk=lineup.pk player_pk=p.pk %}"><p>{{p.position}} {{p.name}} {{p.team}}</p></a>
                {% for s in lineup.lineup_to_score.all %}
                    {% if p.name in s.name_week %}
                        <p>QB Score: {{s.week_score}}</p>
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if p.position == "RB" %}
                <a href="{% url 'add_score' pk=lineup.pk player_pk=p.pk %}"><p>{{p.position}} {{p.name}} {{p.team}}</p></a>
                {% for s in lineup.lineup_to_score.all %}
                    {% if p.name in s.name_week %}
                        <p>RB Score: {{s.week_score}}</p>
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if p.position == "WR" %}
                <a href="{% url 'add_score' pk=lineup.pk player_pk=p.pk %}"><p>{{p.position}} {{p.name}} {{p.team}}</p></a>
                {% for s in lineup.lineup_to_score.all %}
                    {% if p.name in s.name_week %}
                        <p>WR Score: {{s.week_score}}</p>
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if p.position == "TE" %}
                <a href="{% url 'add_score' pk=lineup.pk player_pk=p.pk %}"><p>{{p.position}} {{p.name}} {{p.team}}</p></a>
                {% for s in lineup.lineup_to_score.all %}
                    {% if p.name in s.name_week %}
                        <p>TE Score: {{s.week_score}}</p>
                    {% endif %}
                {% endfor %}
            {% endif %}
            {% if p.position == "K" %}
                <a href="{% url 'add_score' pk=lineup.pk player_pk=p.pk %}"><p>{{p.position}} {{p.name}} {{p.team}}</p></a>
                {% for s in lineup.lineup_to_score.all %}
                    {% if p.name in s.name_week %}
                        <p>K Score: {{s.week_score}}</p>
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}
